"use strict";const search=document.querySelector(".js__input"),button=document.querySelector(".js__button"),reset=document.querySelector(".js__reset"),cocktailList=document.querySelector(".js__ul_list"),fav=document.querySelector(".js__ul_fav"),deleteButton=document.querySelector(".js__delete_button");let cocktails=[],favCocktails=[];function checkLocalStorage(){const e=JSON.parse(localStorage.getItem("favorites"));e&&(favCocktails=e,renderFavCocktails())}function getCocktails(){let e="";e=""===search.value?"margarita":search.value,fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+e).then(e=>e.json()).then(e=>{cocktails=e.drinks.map(e=>({name:e.strDrink,image:e.strDrinkThumb,id:e.idDrink}));for(let e=0;e<cocktails.length;e++)null===cocktails[e].image&&(cocktails[e].image="https://via.placeholder.com/210x295/ffffff/666666/?text=Cocktail");renderCocktails(),addEventToCard()})}function renderCocktails(){cocktailList.innerHTML="";let e="";for(const t of cocktails){e=favCocktails.find(e=>e.id===t.id)?"inverted_colors":"js__list_item",cocktailList.innerHTML+=`<li class="${e}" id=${t.id}>\n<img class="js__img" src="${t.image}" />${t.name}</li>`}}function renderFavCocktails(){fav.innerHTML="";for(const e of favCocktails)fav.innerHTML+=`<img class="js__delete" id=${e.id} src="./assets/images/eliminar.png" alt="" /><li class="js__list_item" id=${e.id}>\n    <img class="js__img" src="${e.image}" />${e.name}</li>`;addEventToX()}function handleClickButton(e){e.preventDefault(),getCocktails()}function toggleClass(e,t,i){const c=document.getElementById(e);c.classList.remove(t),c.classList.add(i)}function handleClickCard(e){e.preventDefault();const t=e.currentTarget.id,i=cocktails.find(e=>e.id===t),c=favCocktails.findIndex(e=>e.id===t);-1===c?(favCocktails.push(i),localStorage.setItem("favorites",JSON.stringify(favCocktails)),toggleClass(t,"js__list_item","inverted_colors")):(favCocktails.splice(c,1),toggleClass(t,"inverted_colors","js__list_item")),renderFavCocktails()}function addEventToCard(){const e=document.querySelectorAll(".js__list_item"),t=document.querySelectorAll(".inverted_colors");for(const t of e)t.addEventListener("click",handleClickCard);for(const e of t)e.addEventListener("click",handleClickCard)}function addEventToX(){const e=document.querySelectorAll(".js__delete");for(const t of e)t.addEventListener("click",handleClickDelete)}function handleClickReset(e){e.preventDefault(),search.value="",getCocktails()}function handleClickDelete(e){e.preventDefault();const t=e.currentTarget.id;if(t){const e=favCocktails.findIndex(e=>e.id===t);favCocktails.splice(e,1),toggleClass(t,"inverted_colors","js__list_item")}else{for(const e of favCocktails)toggleClass(e.id,"inverted_colors","js__list_item");favCocktails=[]}localStorage.setItem("favorites",JSON.stringify(favCocktails)),renderFavCocktails()}checkLocalStorage(),getCocktails(),button.addEventListener("click",handleClickButton),reset.addEventListener("click",handleClickReset),deleteButton.addEventListener("click",handleClickDelete);